"use strict";(self.webpackChunkymf_component=self.webpackChunkymf_component||[]).push([[566],{90609:function(hn,Oe,r){r.r(Oe),r.d(Oe,{Demo:function(){return ut},YmfAuthButton:function(){return T},YmfForm:function(){return He},YmfProTable:function(){return Kt},YmfTable:function(){return Ke}});var i=r(67294),e=r(85893),ot=function(t){return(0,e.jsx)("h4",{children:t.title})},ut=ot,it=r(13769),se=r.n(it),dt=r(19632),ye=r.n(dt),ct=r(15009),N=r.n(ct),ft=r(99289),pe=r.n(ft),ht=r(97857),u=r.n(ht),vt=r(5574),g=r.n(vt),Te=r(31418),De=r(86738),oe=r(42075),mt=r(84567),Ze=r(14726),Ct=r(57953),_=r(83062),Ie=r(85418),gt=r(7513),St=r(11980),yt=r(13149),pt=r(62992),xt=r(68869),jt=r(42952),Be=r(54548),Rt=r(82925),vn=r(33852),Pt=r(28459),kt=r(27484),ue=r.n(kt),Et=["onClick"],xe=function(t){var s=t.children;return(0,e.jsx)(Be.V9,{hashPriority:"high",transformers:[Be.IJ],children:(0,e.jsx)(Pt.ZP,{locale:Rt.Z,children:(0,e.jsx)(Te.Z,{message:{maxCount:1},children:s})})})},Ye=function(t){var s=[];return Array.isArray(t)&&t.length&&t.map(function(x){s.push(u()(u()(u()({},x),{},{check:!0,align:x.align||"center"},x.hiddenEllipsis?{}:{ellipsis:{showTitle:!1}}),x.showTooltip?{render:function(F){return(0,e.jsx)(_.Z,{placement:"bottomLeft",title:F,children:F})}}:{}))}),s},ze=function(t){var s=t.children,x=t.props,E=t.selectedRowKeys,F=t.selectedRows,b=t.ITEM,w=t.RECORD,R=x.onClick,D=se()(x,Et);return(0,i.createElement)(T,u()(u()({},D),{},{key:ue()().valueOf().toString(),onClick:function(){R==null||R({selectedRowKeys:E,selectedRows:F,ITEM:b,RECORD:w})}}),s)},je=i.createContext(),Ft=r(60955),$e=r(68905),bt=r(24969),wt=r(48689),At=r(58638),Lt=["sortObjectSetList"],ee={current:1,size:10,total:0},We=function(t){var s=(0,i.useContext)(je),x=Te.Z.useApp(),E=x.message,F=(0,i.useState)(!1),b=g()(F,2),w=b[0],R=b[1],D=(0,i.useState)(!1),$=g()(D,2),H=$[0],V=$[1],W=(0,i.useState)({items:[],list:[]}),K=g()(W,2),M=K[0],Y=K[1],Pe=(0,i.useState)([]),ie=g()(Pe,2),P=ie[0],G=ie[1],ke=(0,i.useState)([]),de=g()(ke,2),ce=de[0],fe=de[1],J=(0,i.useState)([]),Q=g()(J,2),te=Q[0],he=Q[1],Z=(0,i.useRef)(null),Ee=(0,i.useState)([]),ve=g()(Ee,2),I=ve[0],C=ve[1],S=(0,i.useState)(ee),y=g()(S,2),k=y[0],L=y[1],ne=(0,i.useState)(!1),X=g()(ne,2),Ve=X[0],Mt=X[1],Ut=(0,i.useState)("small"),Ge=g()(Ut,2),me=Ge[0],Nt=Ge[1],Ht=(0,i.useState)(!1),Je=g()(Ht,2),mn=Je[0],Vt=Je[1],Gt=(0,i.useState)([]),Qe=g()(Gt,2),z=Qe[0],Xe=Qe[1],Jt=(0,i.useState)([]),qe=g()(Jt,2),Ce=qe[0],_e=qe[1],Qt=(0,i.useState)({}),et=g()(Qt,2),Xt=et[0],qt=et[1],_t=(0,i.useState)(!1),tt=g()(_t,2),nt=tt[0],en=tt[1],ge=(0,Ft.U)(function(){return{columns:te.length?te:P,minWidth:70}},[P,te]),tn=ge.resizableColumns,nn=ge.components,Cn=ge.tableWidth,an=ge.resetColumns;(0,i.useEffect)(function(){return window.addEventListener("resize",Se),function(){window.removeEventListener("resize",Se)}},[]),(0,i.useEffect)(function(){Array.isArray(P)&&P.length&&!nt&&(t.request&&q(),en(!0))},[P,nt]),(0,$e.useActivate)(function(){window.addEventListener("resize",Se)}),(0,$e.useUnactivate)(function(){window.removeEventListener("resize",Se)}),(0,i.useEffect)(function(){t.searchParams&&(qt(t.searchParams),q(u()({},ee),t.searchParams))},[t.searchParams]);var rn=function(n,a){console.log(n,a)},ln=function(n,a){console.log(n,a)},at=function(){var l=pe()(N()().mark(function n(a,d){var o,c,v,m;return N()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,p.next=3,a.request(d);case 3:c=p.sent,(c==null||(o=c.data)===null||o===void 0?void 0:o.code)==200?(E.success(c==null||(v=c.data)===null||v===void 0?void 0:v.msg),q(ee)):E.warning(c==null||(m=c.data)===null||m===void 0?void 0:m.msg),p.next=10;break;case 7:p.prev=7,p.t0=p.catch(0),console.log(p.t0);case 10:case"end":return p.stop()}},n,null,[[0,7]])}));return function(a,d){return l.apply(this,arguments)}}(),sn=function(n,a,d){var o=Ye(t.columns),c=o.filter(function(h){return!h.baseRender}),v=o.find(function(h){return h.baseRender}),m=[];return v&&Array.isArray(v.baseRender)&&v.baseRender.map(function(h,p){h.type=="edit"?m.push((0,e.jsx)(T,{atuh:h.auth,size:"small",type:"link",onClick:function(){h.onClick?h.onClick({ITEM:n,RECORD:a}):rn(n,a)},children:"\u7F16\u8F91"},p)):h.type=="detail"?m.push((0,e.jsx)(T,{auth:h.auth,size:"small",type:"link",onClick:function(){h.onClick?h.onClick({ITEM:n,RECORD:a}):ln(n,a)},children:"\u8BE6\u60C5"})):h.type=="delete"?m.push((0,e.jsx)(De.Z,{title:"\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D\uFF0C\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onConfirm:function(){h.onClick?h.onClick({ITEM:n,RECORD:a}):at(h,[n],d)},children:(0,e.jsx)(T,{auth:h.auth,size:"small",danger:!0,type:"link",children:"\u5220\u9664"})},p)):m.push((0,i.createElement)(ze,u()(u()({},h),{},{key:p,ITEM:n,RECORD:a}),h))}),m};(0,i.useEffect)(function(){var l=Ye(t.columns),n=l.filter(function(o){return!o.baseRender}),a=l.find(function(o){return o.baseRender}),d=[].concat(ye()(n),ye()(a?[{title:"\u64CD\u4F5C",key:"id",dataIndex:"id",check:!0,fixed:"right",align:"center",width:60*a.baseRender.length,render:function(c,v){return(0,e.jsx)(oe.Z,{size:"small",children:sn(c,v,w)})}}]:[]));G(d),fe(d)},[t.columns]),(0,i.useEffect)(function(){rt(ce)},[ce]),(0,i.useEffect)(function(){Z.current&&lt()},[P,Z]),(0,i.useEffect)(function(){if(Array.isArray(t.dataSource)){var l=[];t.dataSource.map(function(n,a){l.push(u()({index:a+1},n))}),C(l),L(u()(u()({},k),{},{total:t.dataSource.length}))}},[t.dataSource]);var Se=function(){lt()},rt=function(n){var a=n.map(function(d,o){return{key:o,label:(0,e.jsx)(mt.Z,{checked:d.check,children:d.title},o)}});a.unshift({key:"all",label:(0,e.jsx)(Ze.ZP,{children:"\u5168\u9009\u5217"})}),Y({items:a,list:n})},on=function(n){var a=n.key,d=n.domEvent;d.preventDefault();var o=M.list.map(function(v,m){return a==="all"||m===Number(a)?u()(u()({},v),{},{check:a==="all"?!0:!v.check}):v}),c=o.filter(function(v){return v.check});if(!c.length)return E.warning("\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u5217"),!1;rt(o),G(c)},lt=function(){var n,a,d=(Z==null||(n=Z.current)===null||n===void 0||(n=n.querySelector(".ant-table"))===null||n===void 0||(n=n.getBoundingClientRect())===null||n===void 0?void 0:n.width)||1640,o=(t==null||(a=t.scroll)===null||a===void 0?void 0:a.x)||600,c=d;o>d&&(c=o);var v=[],m=[],h=0,p=[];P.map(function(f){f.width?(v.push(f),h+=f.width):m.push(f)}),m.map(function(f,O){O+1!=m.length&&(f.width=(c-h)/m.length)}),v.length===P.length?P.forEach(function(f,O){var ae=f;O+1==P.length-1&&delete f.width,p.push(ae)}):P.forEach(function(f){(v.some(function(O){return f.title===O.title})||m.some(function(O){return f.title===O.title}))&&p.push(f)}),he(p)},q=function(){var l=pe()(N()().mark(function n(){var a,d,o,c,v,m,h,p,f,O,ae,U,re,Fe,be,we,Ae,st,Le,le=arguments;return N()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(d=le.length>0&&le[0]!==void 0?le[0]:{},o=le.length>1?le[1]:void 0,c=d.sortObjectSetList,v=c===void 0?[]:c,m=se()(d,Lt),h=[],p=v.length?v:P,p.map(function(B){typeof B.sorter=="boolean"?B.sortOrder&&!h.length&&h.push({column:B.dataIndex,direction:B.sortOrder==="ascend"?"ASC":"DESC"}):B.sortOrder&&h.push({column:B.dataIndex,direction:B.sortOrder==="ascend"?"ASC":"DESC"})}),f=u()(u()(u()(u()(u()({},k),o||Xt),t!=null&&t.defaultParams?t.defaultParams:{}),m),{},{sortObjectSet:h}),delete f.total,!w){A.next=10;break}return A.abrupt("return",!1);case 10:return R(!0),s==null||(a=s.handleSetProLoading)===null||a===void 0||a.call(s,!0),f.current===1&&(Xe([]),_e([])),A.prev=13,A.next=16,t.request(f);case 16:U=A.sent,(U==null||(O=U.data)===null||O===void 0?void 0:O.code)==200&&(re=(U==null?void 0:U.data)||{},Fe=[],be=re.current,we=re.data,Ae=re.size,st=re.total,L(u()(u()({},k),{},{current:be,size:Ae,total:st})),Array.isArray(we)&&we.map(function(B,fn){Fe.push(u()({index:dn(be,Ae,fn+1)},B))}),C(Fe)),R(!1),s==null||(ae=s.handleSetProLoading)===null||ae===void 0||ae.call(s,!1),A.next=26;break;case 22:A.prev=22,A.t0=A.catch(13),R(!1),s==null||(Le=s.handleSetProLoading)===null||Le===void 0||Le.call(s,!1);case 26:case"end":return A.stop()}},n,null,[[13,22]])}));return function(){return l.apply(this,arguments)}}(),un=function(n,a){q({current:n,size:a})},dn=function(n,a,d){return(n-1)*a+d},cn=function(){var l=pe()(N()().mark(function n(a){var d,o,c,v,m,h;return N()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!w){f.next=2;break}return f.abrupt("return",!1);case 2:return R(!0),f.prev=3,f.next=6,a.request(z);case 6:o=f.sent,(o==null||(d=o.data)===null||d===void 0?void 0:d.code)==200?(v=window.URL.createObjectURL(new Blob([o],{type:"application/vnd.ms-excel"})),m=document.createElement("a"),m.style.display="none",m.href=v,m.setAttribute("download",a.title+".xlsx"),document.body.appendChild(m),m.click(),document.body.removeChild(m),window.URL.revokeObjectURL(v),E.success(o==null||(c=o.data)===null||c===void 0?void 0:c.msg)):E.warning(o==null||(h=o.data)===null||h===void 0?void 0:h.msg),R(!1),f.next=14;break;case 11:f.prev=11,f.t0=f.catch(3),R(!1);case 14:case"end":return f.stop()}},n,null,[[3,11]])}));return function(a){return l.apply(this,arguments)}}();return(0,e.jsx)("div",{ref:Z,children:(0,e.jsxs)(Ct.Z,{spinning:w,tip:"\u52A0\u8F7D\u4E2D...",children:[(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[Array.isArray(t.toolsItem)&&t.toolsItem.length?(0,e.jsx)(oe.Z,{children:t.toolsItem.map(function(l,n){return l.type=="add"?(0,e.jsx)(T,{atuh:l.auth,onClick:function(){l.onClick?l.onClick({selectedRowKeys:z,selectedRows:Ce}):Vt(!0)},type:"primary",icon:(0,e.jsx)(bt.Z,{}),children:"\u65B0\u589E"},n):l.type=="delete"?(0,e.jsx)(De.Z,{title:"\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D\uFF0C\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onConfirm:function(){l.onClick?l.onClick({selectedRowKeys:z,selectedRows:Ce}):at(l,z)},children:(0,e.jsx)(T,{atuh:l.auth,disabled:!z.length,type:"primary",danger:!0,icon:(0,e.jsx)(wt.Z,{}),children:"\u6279\u91CF\u5220\u9664"})},n):l.type=="export"?(0,e.jsx)(T,{atuh:l.auth,onClick:function(){l.onClick?l.onClick({selectedRowKeys:z,selectedRows:Ce}):cn(l)},type:"primary",icon:(0,e.jsx)(At.Z,{}),children:"\u5BFC\u51FA"},n):(0,i.createElement)(ze,u()(u()({},l),{},{key:n,selectedRowKeys:z,selectedRows:Ce}),l)})}):(0,e.jsx)("div",{}),(0,e.jsxs)(oe.Z,{size:"middle",children:[(0,e.jsx)(_.Z,{title:"\u5237\u65B0",children:(0,e.jsx)(yt.Z,{style:{cursor:"pointer"},onClick:function(){return q(ee)}})}),(0,e.jsx)(_.Z,{title:"\u5BBD\u5EA6\u91CD\u7F6E",children:(0,e.jsx)(pt.Z,{style:{cursor:"pointer"},onClick:an})}),(0,e.jsx)(Ie.Z,{menu:{items:[{key:"large",label:"\u5BBD\u677E"},{key:"middle",label:"\u4E2D\u7B49"},{key:"small",label:"\u7D27\u51D1"}],selectable:!0,defaultSelectedKeys:[me],onClick:function(n){var a=n.key,d=n.domEvent;d.preventDefault(),Nt(a)}},trigger:["click"],onOpenChange:function(){return Mt(!Ve)},open:Ve,arrow:!0,placement:"bottomRight",children:(0,e.jsx)(_.Z,{title:"\u5BC6\u5EA6",children:(0,e.jsx)(xt.Z,{style:{cursor:"pointer"}})})}),(0,e.jsx)(Ie.Z,{menu:{items:M.items,onClick:on},trigger:["click"],onOpenChange:function(){return V(!H)},open:H,arrow:!0,placement:"bottomRight",children:(0,e.jsx)(_.Z,{title:"\u5217\u8BBE\u7F6E",children:(0,e.jsx)(jt.Z,{})})})]})]}),(0,e.jsx)(gt.Z,u()(u()({dataSource:I,columns:tn,components:nn,pagination:!!t.dataSource,bordered:!0,rowKey:(t==null?void 0:t.rowKey)||function(l){return l.id||l.index},scroll:u()({scrollToFirstRowOnChange:!0,y:600,x:600},t==null?void 0:t.scroll)},t.rowSelectionType?{rowSelection:{type:t.rowSelectionType,selectedRowKeys:z,columnWidth:50,onChange:function(n,a){console.log({selectedRowKeys:n,selectedRows:a}),Xe(n),_e(a)}}}:{}),{},{size:me,onChange:function(n,a,d){if(Array.isArray(d)||d.field){var o=ye()(P);Array.isArray(d)?o.map(function(c){d.map(function(v){c.dataIndex==v.field&&(c.sortOrder=v.order)})}):o.map(function(c){c.dataIndex==d.field?c.sortOrder=d.order:c.sortOrder=""}),G(o),q(u()(u()({},ee),{},{sortObjectSetList:o}))}}})),!t.dataSource&&(0,e.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,e.jsx)(St.Z,{disabled:w,showQuickJumper:!0,defaultCurrent:k.current,current:k.current,pageSize:k.size,showSizeChanger:!0,pageSizeOptions:[10,50,100,500],total:k.total,showTotal:function(n){return"\u5171 ".concat(n," \u6761")},onChange:un,size:me=="small"?me:"default"})})]})})},Ke=function(j){return j.notWrapper?(0,e.jsx)(We,u()({},j)):(0,e.jsx)(xe,{children:(0,e.jsx)(We,u()({},j))})},Ot=["powerList","auth"],Tt=function(t){var s=t.powerList,x=t.auth,E=se()(t,Ot),F=Array.isArray(s)?s:[],b=localStorage.getItem("powerList");return b&&(F=b.split(",")),!t.auth||F.includes(x)?(0,e.jsx)(Ze.ZP,u()({},E)):null},T=Tt,Me=r(65019),Re=r(65520),Dt=r(38289),Zt=r(34041),Ue=r(15746),It=r(71230),Bt=r(80882),Yt=r(48115),zt=Me.default.RangePicker,Ne=function(t){var s=(0,i.useContext)(je),x=t.formItemRender,E=Re.Z.useForm(null),F=g()(E,1),b=F[0],w=(0,i.useState)(!1),R=g()(w,2),D=R[0],$=R[1],H=(0,i.useState)(!1),V=g()(H,2),W=V[0],K=V[1],M=(0,i.useState)([]),Y=g()(M,2),Pe=Y[0],ie=Y[1],P=(0,i.useState)([]),G=g()(P,2),ke=G[0],de=G[1],ce=(0,i.useState)(0),fe=g()(ce,2),J=fe[0],Q=fe[1],te={Input:function(C){var S=C.itemTypeProps,y=C.label;return(0,e.jsx)(Dt.Z,u()({placeholder:"\u8BF7\u8F93\u5165".concat(y),allowClear:!0},S))},Select:function(C){var S=C.itemTypeProps,y=C.label;return(0,e.jsx)(Zt.default,u()({placeholder:"\u8BF7\u9009\u62E9".concat(y),showSearch:!0,allowClear:!0,filterOption:function(L,ne){var X;return((X=ne==null?void 0:ne.label)!==null&&X!==void 0?X:"").toLowerCase().includes(L.toLowerCase())}},S))},DatePicker:function(C){var S=C.itemTypeProps,y=C.label;return(0,e.jsx)(Me.default,u()({style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9".concat(y),allowClear:!0},S))},RangePicker:function(C){var S=C.itemTypeProps,y=C.label;return(0,e.jsx)(zt,u()({style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9".concat(y),allowClear:!0},S))}};(0,i.useEffect)(function(){Array.isArray(x)&&x.length&&(ie(x.slice(0,2)),de(x.slice(2)),x.length>2&&$(!0))},[x]),(0,i.useEffect)(function(){s!=null&&s.proLoading||Q(0)},[s==null?void 0:s.proLoading]);var he=function(C){return C.map(function(S){var y=te[S.itemType];return(0,e.jsx)(Ue.Z,{span:8,children:(0,e.jsx)(Re.Z.Item,{name:S.name,label:S.label,children:y?y(S):S.element},S.name)},S.name)})},Z=function(C,S){return(0,e.jsx)(Ue.Z,{span:C,style:{textAlign:"right"},children:(0,e.jsxs)(oe.Z,{children:[(0,e.jsx)(T,{onClick:Ee,loading:J==1,disabled:J==2,children:"\u91CD\u7F6E"}),(0,e.jsx)(T,{type:"primary",htmlType:"submit",loading:J==2,disabled:J==1,children:"\u67E5\u8BE2"}),S?(0,e.jsxs)("a",{style:{cursor:"pointer"},onClick:function(){return K(!0)},children:["\u5C55\u5F00",(0,e.jsx)(Bt.Z,{})]}):(0,e.jsxs)("a",{style:{cursor:"pointer"},onClick:function(){return K(!1)},children:["\u6536\u8D77",(0,e.jsx)(Yt.Z,{})]})]})})},Ee=function(){var C;if(s!=null&&s.proLoading)return!1;s&&Q(1),b.resetFields(),s==null||(C=s.handleResetClick)===null||C===void 0||C.call(s)},ve=function(C){var S;if(s!=null&&s.proLoading)return!1;s&&Q(2);var y={};for(var k in C){var L=C[k];k.indexOf("_[time]")!==-1?(y["".concat(k.replace(/_\[time\]/,""))]=L?ue()(L).format("YYYY-MM-DD"):void 0,delete y.i):k.indexOf("_[twoTime]")!==-1?(y["".concat(k.replace(/_\[twoTime\]/,""))]=L?[ue()(L[0]).format("YYYY-MM-DD"),ue()(L[1]).format("YYYY-MM-DD")]:void 0,delete y.i):y[k]=L}console.log({newValues:y}),s==null||(S=s.handleFinishClick)===null||S===void 0||S.call(s,y)};return(0,e.jsx)("div",{children:(0,e.jsx)(Re.Z,{onFinish:ve,form:b,children:(0,e.jsxs)(It.Z,{gutter:16,children:[he(Pe),W&&he(ke),D&&!W&&Z(8,!0),D&&W&&Z(24,!1)]})})})},He=function(j){return j.notWrapper?(0,e.jsx)(Ne,u()({},j)):(0,e.jsx)(xe,{children:(0,e.jsx)(Ne,u()({},j))})},$t=["formItemRender"],Wt=function(t){var s=t.formItemRender,x=se()(t,$t),E=(0,i.useState)(null),F=g()(E,2),b=F[0],w=F[1],R=(0,i.useState)(!1),D=g()(R,2),$=D[0],H=D[1],V=function(Y){w(Y)},W=function(){w({})},K=function(Y){H(Y)};return(0,e.jsx)("div",{children:(0,e.jsxs)(je.Provider,{value:{handleFinishClick:V,handleResetClick:W,handleSetProLoading:K,proLoading:$},children:[(0,e.jsx)(He,{notWrapper:!0,formItemRender:t.formItemRender}),(0,e.jsx)(Ke,u()(u()({notWrapper:!0},x),{},{searchParams:b}))]})})},Kt=function(j){return(0,e.jsx)(xe,{children:(0,e.jsx)(Wt,u()({},j))})}}}]);
